# 目录
- [平衡二叉树](#平衡二叉树)
	- [特点](#特点)
	- [实现平衡操作的常见算法](#实现平衡操作的常见算法)
- [B树](#B树)
	- [特点](#特点)
- [B+树](#B+树)
	- [特点](#特点)
	- [与B树功能对比](#与B树功能对比)
- [B*树](#B*树)
	- [特点](#特点)
	- [与`B+`树功能对比](#与`B+`树功能对比)
- [R树](#R树)
- [参考资料](#参考资料)
# 平衡二叉树
## 特点
1. 非叶子节点最多拥有两个子节点。
2. 非叶子节值大于左边子节点、小于右边子节点；没有值相等重复的节点。
3. 树的左右两边的层级数相差不会大于1。
## 实现平衡操作的常见算法
1. [AVL树](https://zhuanlan.zhihu.com/p/34899732)

2. [Treap](https://blog.csdn.net/K346K346/article/details/50808879)
结合堆和二叉搜索树，给每个点分配一个随机的权重，用着个随机权重来保持堆的性质（堆是平衡的）。插入时先按普通的二分查找树插入（不要求平衡），插入后检查插入的节点是否满足堆的性质，不满足进行变换。都是`O(log(h))`的复杂度

3. [红黑树](http://www.cnblogs.com/skywang12345/p/3245399.html)

> Java集合中的TreeSet和TreeMap，C++ STL中的set、map，以及Linux虚拟内存的管理，都是通过红黑树去实现的


# B树
## 特点
**B树相对于平衡二叉树的不同是，每个节点包含的关键字增多了**。特别是在B树应用到数据库中的时候，数据库充分利用了磁盘块的原理，把节点大小限制在充分使用磁盘块大小的范围（磁盘数据存储是采用块的形式存储的，每个块的大小为4K，每次IO进行数据读取时，同一个磁盘块的数据可以一次性读取出来）；把树的节点关键字增多后树的层级比原来的二叉树少了，减少数据查找的次数和复杂度;

# B+树
## 特点
1. **B+跟B树不同的是，B+树的非叶子节点不保存关键字记录的指针，只进行数据索引，这样使得B+树每个非叶子节点所能保存的关键字大大增加**；B+树叶子节点保存了父节点的所有关键字记录的指针，所有数据地址必须要到叶子节点才能获取到。所以每次数据查询的次数都一样。
2. **B+树叶子节点的关键字从小到大有序排列，左边结尾数据都会保存右边节点开始数据的指针**。
## 与B树功能对比
1. B+树的层级更少：相较于B树B+每个非叶子节点存储的关键字数更多，树的层级更少所以查询数据更快；
2. B+树查询速度更稳定：B+所有关键字数据地址都存在叶子节点上，所以每次查找的次数都相同所以查询速度要比B树更稳定;
3. B+树天然具备排序功能：B+树所有的叶子节点数据构成了一个有序链表，在查询大小区间的数据时候更方便，数据紧密性很高，缓存的命中率也会比B树高。
4. B+树全节点遍历更快：B+树遍历整棵树只需要遍历所有的叶子节点即可，，而不需要像B树一样需要对每一层进行遍历，这有利于数据库做全表扫描。
5. B树相对于B+树的优点是，如果经常访问的数据离根节点很近，而B树的非叶子节点本身存有关键字其数据的地址，所以这种数据检索的时候会要比B+树快。
# B*树
## 特点
`B*`树是`B+`树的变种，与`B+`树的不同如下：

1. 首先是关键字个数限制问题，`B+`树初始化的关键字初始化个数是ceil(m/2)，`b*`树的初始化个数为（`cei(2/3*m)`）。（注：m代表树中一个节点最多少个子节点。ceil 天花板，向上取整；floor 地板，向下取整；round 附近，四舍五入）
2. `B+`树节点满时就会分裂，而`B*`树节点满时会检查兄弟节点是否满（因为每个节点都有指向兄弟的指针,`B+`只有叶子节点有指向兄弟节点的指针），如果兄弟节点未满则向兄弟节点转移关键字; 如果兄弟节点已满，则从当前节点和兄弟节点各拿出1/3的数据创建一个新的节点出来。
## 与`B+`树功能对比
1. 在B+树的基础上因其初始化的容量变大，使得节点空间使用率更高，层级更少
2. 而又存有兄弟节点的指针，可以向兄弟节点转移关键字的特性使得`B*`树额分解次数变得更少.
3. 疑问：如果检查左右两个兄弟节点，似乎可以初始ceil(3m/4)，分裂次数更少啊，多了3m/4的数据才需要分裂一次;边界节点可以ceil(2m/3),中间节点ceil(3m/4) 不知道为啥没有这么做？

# R树
1. R树用来处理空间数据存储问题。R树全称是Rectangle Tree(二维时，或者Region Tree)。
2. R树中，包含一部分区域的是一个节点，上一级节点包含多个这样的区域（例如镇是一级，县包含多个镇，是上一级）。详见：[从B树、B+树、B*树谈到R 树](https://blog.csdn.net/v_JULY_v/article/details/6530142/)

# 参考资料
- [平衡二叉树、B树、B+树、B*树 理解其中一种你就都明白了](https://zhuanlan.zhihu.com/p/27700617)
- [从B树、B+树、B*树谈到R 树](https://blog.csdn.net/v_JULY_v/article/details/6530142/)
- [详解 AVL 树（基础篇）](https://zhuanlan.zhihu.com/p/34899732)
- [树堆（Treap）图文详解与实现](https://blog.csdn.net/K346K346/article/details/50808879)
- [红黑树(一)之 原理和算法详细介绍](https://www.cnblogs.com/skywang12345/p/3245399.html)